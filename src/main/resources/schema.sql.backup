-- Schema for RentCar API

-- Create Marcas table
CREATE TABLE marcas (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    descripcion VARCHAR(255) NOT NULL,
    estado BOOLEAN NOT NULL
);

-- Create Tipos Vehiculos table
CREATE TABLE tipos_vehiculos (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    descripcion VARCHAR(255) NOT NULL,
    estado BOOLEAN NOT NULL
);

-- Create Tipos Combustibles table
CREATE TABLE tipos_combustibles (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    descripcion VARCHAR(255) NOT NULL,
    estado BOOLEAN NOT NULL
);

-- Create Modelos table
CREATE TABLE modelos (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    marca_id BIGINT NOT NULL,
    descripcion VARCHAR(255) NOT NULL,
    estado BOOLEAN NOT NULL,
    FOREIGN KEY (marca_id) REFERENCES marcas(id)
);

-- Create Empleados table
CREATE TABLE empleados (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    cedula VARCHAR(255) NOT NULL UNIQUE,
    tanda_labor VARCHAR(255) NOT NULL,
    porciento_comision DECIMAL(5,2) NOT NULL,
    fecha_ingreso DATE NOT NULL,
    estado BOOLEAN NOT NULL
);

-- Create Clientes table
CREATE TABLE clientes (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    cedula VARCHAR(255) NOT NULL UNIQUE,
    no_tarjeta_cr VARCHAR(255) NOT NULL,
    limite_credito DECIMAL(10,2) NOT NULL,
    tipo_persona VARCHAR(255) NOT NULL,
    estado BOOLEAN NOT NULL
);

-- Create Vehiculos table
CREATE TABLE vehiculos (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    descripcion VARCHAR(255) NOT NULL,
    no_chasis VARCHAR(255) NOT NULL UNIQUE,
    no_motor VARCHAR(255) NOT NULL UNIQUE,
    no_placa VARCHAR(255) NOT NULL UNIQUE,
    tipo_vehiculo_id BIGINT NOT NULL,
    marca_id BIGINT NOT NULL,
    modelo_id BIGINT NOT NULL,
    tipo_combustible_id BIGINT NOT NULL,
    estado BOOLEAN NOT NULL,
    FOREIGN KEY (tipo_vehiculo_id) REFERENCES tipos_vehiculos(id),
    FOREIGN KEY (marca_id) REFERENCES marcas(id),
    FOREIGN KEY (modelo_id) REFERENCES modelos(id),
    FOREIGN KEY (tipo_combustible_id) REFERENCES tipos_combustibles(id)
);

-- Create Rentas table
CREATE TABLE rentas (
    no_renta BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    empleado_id BIGINT NOT NULL,
    vehiculo_id BIGINT NOT NULL,
    cliente_id BIGINT NOT NULL,
    fecha_renta DATE NOT NULL,
    fecha_devolucion DATE,
    monto_dia DECIMAL(10,2) NOT NULL,
    cantidad_dias INTEGER NOT NULL,
    comentario VARCHAR(500),
    estado VARCHAR(255) NOT NULL,
    FOREIGN KEY (empleado_id) REFERENCES empleados(id),
    FOREIGN KEY (vehiculo_id) REFERENCES vehiculos(id),
    FOREIGN KEY (cliente_id) REFERENCES clientes(id)
);

-- Create Inspecciones table
CREATE TABLE inspecciones (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    vehiculo_id BIGINT NOT NULL,
    cliente_id BIGINT NOT NULL,
    tiene_ralladuras BOOLEAN NOT NULL,
    tiene_abolladuras BOOLEAN NOT NULL,
    tiene_goma_repuesto BOOLEAN NOT NULL,
    tiene_gato BOOLEAN NOT NULL,
    tiene_roturas_cristal BOOLEAN NOT NULL,
    cantidad_combustible DECIMAL(5,2) NOT NULL,
    fecha DATE NOT NULL,
    comentario VARCHAR(500),
    FOREIGN KEY (vehiculo_id) REFERENCES vehiculos(id),
    FOREIGN KEY (cliente_id) REFERENCES clientes(id)
);